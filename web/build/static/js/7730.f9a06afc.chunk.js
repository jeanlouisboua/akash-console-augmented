"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[7730],{94623:function(e,t,n){function r(e){return null!==e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"message")}n.d(t,{V:function(){return r}})},27730:function(e,t,n){n.r(t);var r,s=n(50669),a=n(50189),i=n(11092),u=n(27791),c=n(11026),o=n(56167),l=n(47292),d=n(57911),p=n(54379),f=n(34347),m=n(95958),g=n(97798),h=n(87176),x=n(99377),y=n(70938),v=n(2810),Z=n(47667),C=n(24488),w=n(30511),S=n(94623),b=n(34909),j=n(79139),k=n(462),I=n(55119),V=n(88848),F=n(37878);t.default=function(){(0,I.XG)().networkType;var e=(0,g.s0)(),t=(0,h.sJ)(x._i),n=(0,o.useState)(),r=(0,c.Z)(n,2),s=r[0],l=r[1],q=(0,g.UO)(),L=q.intentId,N=q.dseq,O=(0,h.FV)(x.Fq),J=(0,c.Z)(O,2),A=J[0],B=J[1],D=(0,o.useState)(""),R=(0,c.Z)(D,2),T=R[0],E=R[1],H=(0,o.useState)({currentCard:1}),P=(0,c.Z)(H,2),z=P[0],G=P[1],U=(0,o.useState)(!1),X=(0,c.Z)(U,2),_=X[0],K=X[1],Q=(0,o.useCallback)((function(){return K(!1)}),[]),W=(0,g.TH)().state,Y=(0,k.useMutation)(j.Pv),$=Y.mutate,ee=Y.isLoading,te=(0,k.useMutation)(j.Me),ne=te.mutate,re=te.isLoading,se=(0,k.useMutation)(j.A1),ae=se.mutate,ie=se.isLoading,ue=ee||re||ie;(0,o.useEffect)((function(){if(L&&!N)G({currentCard:2});else if(N)return l({owner:t.accounts[0].address,dseq:N}),void G({currentCard:3})}),[N,L,t]);var ce=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E("Creating lease");try{ne(n,{onSuccess:function(e){e?(E("Sending manifest"),ae({address:t.accounts[0].address,lease:e,sdl:A})):E("Could not create lease.")}})}catch(r){(0,S.V)(r)&&console.log("CustomApp.tsx"+r.message),E("")}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,F.jsx)(d.Z,{sx:{width:"100%",minHeight:"450px",marginBottom:"25px"},children:(0,F.jsx)(f.J9,{enableReinitialize:!0,initialValues:(0,a.Z)((0,a.Z)({},C.Sc),{},{sdl:(0,Z.Ff)(W.sdl)}),onSubmit:function(){var n=(0,u.Z)((0,i.Z)().mark((function n(r,s){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s.setSubmitting,s.setFieldValue,E("Creating deployment"),E("Creating deployment"),n.prev=3,r.sdl){n.next=7;break}return V.Z.error("No SDL found"),n.abrupt("return");case 7:$({wallet:t,sdl:r.sdl},{onSuccess:function(t){t&&t.deploymentId&&(l(t.deploymentId),B(r.sdl),e("/configure-deployment/".concat(t.deploymentId.dseq)),localStorage.setItem("".concat(t.deploymentId.dseq),JSON.stringify({name:r.appName,sdl:r.sdl})))}}),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(3),(0,S.V)(n.t0)&&console.log("CustomApp.tsx"+n.t0.message),E("");case 14:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(e,t){return n.apply(this,arguments)}}(),children:function(t){var n=t.values,r=(t.submitForm,t.setFieldValue);return(0,F.jsxs)(F.Fragment,{children:[!ue&&1===z.currentCard&&(0,F.jsx)(m.E,{sdl:n.sdl,reviewSdl:_,closeReviewModal:Q,configurationType:C.rs.Create,progressVisible:ue,cardMessage:T,onSave:function(e){return r("sdl",e)},actionItems:function(){return(0,F.jsxs)(M,{children:[(0,F.jsxs)(p.Z,{variant:"outlined",onClick:function(){return K(!0)},children:[(0,F.jsx)("span",{className:"mr-2",children:"Review SDL"})," ",(0,F.jsx)(w.JO,{type:"edit"})]}),(0,F.jsx)(p.Z,{variant:"contained",onClick:function(){return function(t,n){n&&(B(n),e("/new-deployment/custom-sdl/".concat(t),{state:{sdl:n}}))}("preflight-check",n.sdl)},children:"Create Deployment"})]})}}),!ue&&2===z.currentCard&&"preflight-check"===L&&(0,F.jsx)(b.M,{}),!ue&&3===z.currentCard&&s&&(0,F.jsx)(y.Z,{children:(0,F.jsx)(v.Z,{deploymentId:s,onNextButtonClick:function(e){return ce(e)}})})]})}})})};var M=l.Z.div(r||(r=(0,s.Z)(["\n  display: flex;\n  justify-content: flex-end;\n\n  Button {\n    margin-right: 10px;\n  }\n"])))}}]);
//# sourceMappingURL=7730.f9a06afc.chunk.js.map